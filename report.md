# Liquidity & Crowding-Aware Adaptive Momentum Portfolio

---

## 1. 전략 개요

본 프로젝트는 중기 모멘텀(Momentum)을 기반으로 한 시스템 멀티자산 포트폴리오 전략이다.  
다만 핵심 목표는 수익률 극대화가 아니라, **시장 구조 변화에 대한 리스크 조정과 낙폭 통제**에 있다.

이를 위해 전통적인 모멘텀 신호 위에 다음의 구조적 위험 요인을 **오버레이(overlay) 형태로 반영**한다.

- *Crowding Risk*: 자산 간 동조화(상관관계) 상승으로 인한 분산 효과 붕괴
- *Liquidity Stress*: 거래대금 대비 가격 충격(Amihud-style proxy) 악화로 인한 실행/디레버리징 리스크

해당 위험이 관측되는 구간에서는 포트폴리오의 위험 노출을 자동으로 축소하며,  
축소된 잔여 비중은 현금성 자산(BIL)로 이동한다.

---

## 2. 전략 설계

### 2.1 투자 대상

본 전략은 데이터 접근성과 실행 가능성을 고려하여 다음의 미국 ETF를 대상 자산으로 설정한다.

- SPY: 미국 주식시장
- QQQ: 미국 성장주
- TLT: 미국 장기 국채
- GLD: 금
- BIL: 현금성(단기 국채 ETF) 버킷

---

### 2.2 기본 시그널: 중기 모멘텀 (Long / Flat)

자산 선택은 월말 가격 데이터 기반의 모멘텀 신호로 수행한다.  
본 전략은 롱 온리(Long / Flat) 구조이며, 음수 모멘텀은 0으로 처리하여 숏 포지션을 사용하지 않는다.

- 월별 가격으로 모멘텀 신호 계산
- 장단기 구간을 결합한 중기 모멘텀
- 장기 창(z-window)에서 z-score로 정규화
- Long/Flat 강제: 음수 신호는 0

---

### 2.3 변동성 기반 노출 조정 (Volatility Scaling)

변동성은 월별 수익률 기반의 실현 변동성(rolling window)으로 추정한다.  
변동성이 상승할수록 전체 노출을 축소하는 배율(multiplier)을 적용하여, 불안정 국면에서 과도한 리스크를 제한한다.

- 월별 실현 변동성 계산
- 변동성 수준에 따라 노출 배율 적용

---

### 2.4 Crowding 지표: 상관관계 기반 분산 붕괴 감지

Crowding은 직접 포지션 데이터 없이도 관측 가능한 *시장 구조 신호*로 정의한다.  
본 전략에서는 **자산 간 롤링 상관관계 수준(rolling cross-asset correlation)**을 사용하여, 분산 효과가 약화되는 국면을 감지한다.

- 자산 수익률 간 롤링 상관관계 수준 계산
- 상관관계 상승(동조화 강화) 구간에서 노출 축소

---

### 2.5 Liquidity 지표: Amihud-style price impact proxy

Liquidity Stress는 “같은 거래대금에서 가격이 더 크게 움직이는 상태”를 실행 리스크로 해석한다.  
본 전략은 일별 수익률과 거래대금(dollar volume)을 이용한 **Amihud-style illiquidity proxy**를 구성하고, 이를 시간에 따라 정규화하여 시장 수준의 유동성 스트레스를 측정한다.

- 일별 수익률과 거래대금으로 illiquidity proxy 구성
- 악화 구간에서 노출 배율 감소

---

### 2.6 포트폴리오 구성 및 현금(BIL) 버킷

포트폴리오 비중은 다음 순서로 구성된다.

1. 모멘텀 신호 + 변동성 기반으로 기본 비중 산출 (base weights)
2. Vol / Crowding / Liquidity multiplier를 결합한 총 배율 적용
3. 위험자산 합이 1을 초과하지 않도록 조정
4. 남는 비중은 BIL(현금성)로 배분

또한 변동성 데이터가 유효하지 않은 구간(예: 초기 구간 또는 결측)은 **전액 BIL로 fallback** 하여, 데이터 이상 시 현금 대피가 가능하도록 한다.

---

## 3. 백테스트 방식

- 신호 및 배율은 **월 단위**로 계산한다.
- 월별 비중을 **일 단위로 forward-fill** 하여 일간 수익률로 성과를 평가한다.
- 거래는 다음날 체결 가정(shift)으로 룩어헤드 편향을 방지한다.
- 레버리지 및 숏 포지션은 사용하지 않는다.
- 총 익스포저는 100% 이내로 제한한다.

---

## 4. 성과 평가 기준

성과는 절대 수익률보다 리스크 조정 관점에서 평가한다.

- CAGR (연환산 수익률)
- 연환산 변동성
- Sharpe ratio
- Max drawdown (최대 낙폭)

특히 시장 스트레스 구간에서의 노출 축소가 낙폭 감소에 기여하는지를 핵심 기준으로 삼는다.

---

## 5. 한계 및 향후 개선

본 전략은 설명 가능성과 구조적 리스크 반영에 초점을 둔 단순한 형태이며, 향후 다음 확장이 가능하다.

- 거래비용/슬리피지 모델링 정교화
- 대체 유동성 지표(예: bid-ask spread proxy, volume shock 등) 추가
- 레짐 분류(거시/변동성 국면) 기반 오버레이 고도화

단, 본 프로젝트에서는 과적합 위험을 줄이기 위해 위 확장은 적용하지 않는다.
